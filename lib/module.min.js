define("validate",["underscore"],function(e){return function(t){if(e.has(t,"Validation")){if(!1===e.isArray(t.Validation))throw{message:"Error: Validation type was not array!"};if(!1===e.every(t.Validation,function(t){return e.isFunction(t)})&&!1===e.isEmpty(t.Validation))throw{message:"Error: Validation element type was not function!"};return e.every(t.Validation,function(e){return e(t.Data)})}}}),define("parseValidation",[],function(){return[function(e){if("string"!=typeof e.Options)throw{message:"Error: The input type was not string."};if(null==e.Options.match(/^.*define\(.*\);\s*$/gim))throw{message:"Error: Module does not contain a valid define statement."};if(null==e.Options.match(/^.*define\(.*({.*}|function\s*\(.*\)\s*{.*})\s*\);\s*$/gim))throw{message:"Error: The define statement has no content."};return!0},function(e){if(JSON.stringify(_.difference(["Header","Name","Dependencies","Exports","Content"],Object.keys(e.Object)))!=JSON.stringify([]))throw{message:"Error: The context was not a valid module."};return!0}]}),define("parse",["validate","parseValidation"],function(e,t){return function(n){var i=this;e({Validation:t,Data:{Options:n,Object:i}});var s=new RegExp(/^([\s\S]*)define\((.*)\);\s*$/i).exec(n);i.Header=s[1];var r=new RegExp(/^\s*('.+'|".+")?,?\s*(\[[\s\S]*\])?,?\s*(function\([\s\S]*\)\s*{[\s\S]*}|{[\s\S]*})\s*$/i).exec(s[2]).splice(1).filter(function(e){return Boolean(e)});if(1==r.length)i.Content=r[0];else if(2==r.length)if(i.Content=r[1],r[0].match(/^\s*('.+'|".+")\s*$/))i.Name=r[0].replace(/'|"/g,"");else{if(!r[0].match(/^\[[\s\S]*\]$/))throw{message:"The first argument of the define statement was not valid."};i.Dependencies=JSON.parse(r[0].replace(/'|"/g,'"')),r[1].match(/^function\(([\s\S]+)\)\s*{[\s\S]*}$/i)&&(i.Exports=new RegExp(/^function\(([\s\S]+)\)\s*{[\s\S]*}$/i).exec(r[1])[1].split(",").map(function(e){return new RegExp(/^\s*(\S+)\s*$/).exec(e)[1]}))}else{if(3!=r.length)throw{message:"Error: Invalid number of define arguments."};i.Name=r[0].replace(/'|"/g,""),i.Dependencies=JSON.parse(r[1].replace(/'|"/g,'"')),i.Content=r[2],r[2].match(/^function\(([\s\S]+)\)\s*{[\s\S]*}$/i)&&(i.Exports=new RegExp(/^function\(([\s\S]+)\)\s*{[\s\S]*}$/i).exec(r[2])[1].split(",").map(function(e){return new RegExp(/^\s*(\S+)\s*$/).exec(e)[1]}))}return i}}),define("composeValidation",["underscore"],function(e){return[function(t){if(t.Options&&"object"!=typeof t.Options)throw{message:"Error: The input is not of type object."};if(t.Options&&JSON.stringify(e.difference(Object.keys(t.Options),["Header","Name","Dependencies","Exports","Content"]))!=JSON.stringify([]))throw{message:"Error: The input is invalid."};return!0},function(t){if(JSON.stringify(e.difference(["Header","Name","Dependencies","Exports","Content"],Object.keys(t.Object)))!=JSON.stringify([]))throw{message:"Error: The state of the module was invalid."};if("string"!=typeof t.Object.Content)throw{message:"Error: The state content is not valid."};if(t.Object.Name&&"string"!=typeof t.Object.Name)throw{message:"Error: The state name is not of type string."};if(t.Object.Dependencies&&0==Array.isArray(t.Object.Dependencies))throw{message:"Error: The state dependencies is not of type array."};if(t.Object.Exports&&0==Array.isArray(t.Object.Exports))throw{message:"Error: The state exports is not of type array."};if(t.Object.Exports&&null==t.Object.Content.match(/^function\([\s\S]*\)\s*{[\s\S]*}$/i))throw{message:"Error: State has exports but content is not of type function."};return!0}]}),define("compose",["validate","composeValidation"],function(e,t){return function(n){var i=this,s="";return e({Data:{Object:i,Options:n},Validation:t}),Object.assign(i,n),i.Header&&(s=i.Header),s+="define(",i.Content&&(i.Name&&(s+='"'+i.Name+'", '),i.Dependencies&&(s+=JSON.stringify(i.Dependencies)+", "),i.Exports&&i.Content.match(/^function\([\s\S]*\)\s*{[\s\S]*}$/i)?(s+="function(",i.Exports.forEach(function(e,t){s+=e,i.Exports.length>1&&t!=i.Exports.length-1&&(s+=",")}),s+=") "+new RegExp(/^function\([\s\S]*\)\s*({[\s\S]*})$/i).exec(i.Content)[1]):s+=i.Content),s+=");"}}),define("Module",["parse","compose"],function(e,t){return function(){return{Header:void 0,Name:void 0,Dependencies:void 0,Exports:void 0,Content:void 0,parse:e,compose:t}}});